___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "AdGlare Ad Tag",
  "categories": ["ADVERTISING", "ANALYTICS","ATTRIBUTION","CONVERSIONS"],
  "brand": {
    "id": "adglare_ad_server",
    "displayName": "AdGlare Ad Server",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Do you sell ad inventory? Insert this tag once. Then manage all campaigns via your AdGlare Ad Manager portal. Complete solution: ad delivery, pacing, targeting and reporting. See adglare.com for info.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "domain",
    "displayName": "Domain",
    "simpleValueType": true,
    "help": "Get your domain via the Ad Tag Generator (in AdGlare).",
    "valueHint": "example.engine.adglare.net",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "zID",
    "displayName": "Zone ID",
    "simpleValueType": true,
    "help": "Get the zID via the Properties tab of a zone (in AdGlare).",
    "valueHint": "123456789",
    "valueValidators": [
      {
        "type": "POSITIVE_NUMBER"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "containerID",
    "displayName": "DIV Container ID",
    "simpleValueType": true,
    "help": "Only required for Display Ads. Enter the ID of the DIV container on your website where the ad should be displayed.",
    "valueHint": "zone_in_sidebar",
    "canBeEmptyString": true
  },
  {
    "type": "TEXT",
    "name": "keywords",
    "displayName": "Keywords (optional)",
    "simpleValueType": true,
    "canBeEmptyString": true,
    "help": "Optional. Comma-separated list of keywords, used for targeting.",
    "valueHint": "car,audi"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// require relevant APIs
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const encodeUriComponent = require('encodeUriComponent');
const getTimestamp = require('getTimestamp');

// capture values of template fields
var url = 'https://'+data.domain+'/?' + data.zID + '&cb=' + getTimestamp();
if (data.containerID) url += '&containerID=' + encodeUriComponent(data.containerID);
if (data.keywords) url += '&keywords=' + encodeUriComponent(data.keywords);

// inject script
if (queryPermission('inject_script', url)) {
  injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);
} else {
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.engine.adglare.net/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 3/31/2020, 6:07:41 PM


